# Estructura del Proyecto ClÃ­nica App

# CLINICAAPP - ARQUITECTURA CON SIGNALS/SLOTS/PROPERTIES

clinica_app/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ core/                                    # ğŸ†• NÃºcleo del sistema
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py                            # ConfiguraciÃ³n centralizada
â”‚   â”‚   â”œâ”€â”€ database_conexion.py               # ConexiÃ³n SQL Server
â”‚   â”‚   â”œâ”€â”€ excepciones.py                        # Excepciones personalizadas
â”‚   â”‚   â”œâ”€â”€ cache_system.py                      # Sistema de cachÃ© completo
â”‚   â”‚   â”œâ”€â”€ base_repository.py                   # Repositorio base
â”‚   â”‚   â””â”€â”€ utils.py                             # Utilidades generales
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                                  # ğŸ¯ QObject Models para QML
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ usuario_model.py                     # Usuario + Roles (QObject)
â”‚   â”‚   â”œâ”€â”€ paciente_model.py                    # Pacientes (QObject)
â”‚   â”‚   â”œâ”€â”€ doctor_model.py                      # Doctores + Especialidades (QObject)
â”‚   â”‚   â”œâ”€â”€ trabajador_model.py                  # Trabajadores + Tipos (QObject)
â”‚   â”‚   â”œâ”€â”€ consulta_model.py                    # Consultas mÃ©dicas (QObject)
â”‚   â”‚   â”œâ”€â”€ laboratorio_model.py                 # Laboratorio (QObject)
â”‚   â”‚   â”œâ”€â”€ inventario_model.py                  # Productos + Marcas + Lotes (QObject)
â”‚   â”‚   â”œâ”€â”€ compra_model.py                      # Compras + Proveedores (QObject)
â”‚   â”‚   â”œâ”€â”€ venta_model.py                       # Ventas + Detalles (QObject)
â”‚   â”‚   â”œâ”€â”€ gasto_model.py                       # Gastos + Tipos (QObject)
â”‚   â”‚   â”œâ”€â”€ auth_model.py                        # AutenticaciÃ³n (QObject)
â”‚   â”‚   â””â”€â”€ dashboard_model.py                   # EstadÃ­sticas generales (QObject)
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                                # ğŸ§  LÃ³gica de negocio (OPCIONAL)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth_service.py                      # AutenticaciÃ³n + Sesiones
â”‚   â”‚   â”œâ”€â”€ usuario_service.py                   # GestiÃ³n usuarios
â”‚   â”‚   â”œâ”€â”€ paciente_service.py                  # GestiÃ³n pacientes
â”‚   â”‚   â”œâ”€â”€ doctor_service.py                    # GestiÃ³n doctores
â”‚   â”‚   â”œâ”€â”€ trabajador_service.py                # GestiÃ³n trabajadores
â”‚   â”‚   â”œâ”€â”€ consulta_service.py                  # GestiÃ³n consultas
â”‚   â”‚   â”œâ”€â”€ laboratorio_service.py               # GestiÃ³n laboratorio
â”‚   â”‚   â”œâ”€â”€ inventario_service.py                # GestiÃ³n productos
â”‚   â”‚   â”œâ”€â”€ compra_service.py                    # GestiÃ³n compras
â”‚   â”‚   â”œâ”€â”€ venta_service.py                     # GestiÃ³n ventas
â”‚   â”‚   â”œâ”€â”€ gasto_service.py                     # GestiÃ³n gastos
â”‚   â”‚   â”œâ”€â”€ reporte_service.py                   # GeneraciÃ³n PDFs
â”‚   â”‚   â””â”€â”€ dashboard_service.py                 # EstadÃ­sticas generales
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/                            # ğŸ“Š Acceso a datos
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ usuario_repository.py                # Usuario + Roles
â”‚   â”‚   â”œâ”€â”€ paciente_repository.py               # Pacientes
â”‚   â”‚   â”œâ”€â”€ doctor_repository.py                 # Doctores + Especialidades
â”‚   â”‚   â”œâ”€â”€ trabajador_repository.py             # Trabajadores + Tipos
â”‚   â”‚   â”œâ”€â”€ consulta_repository.py               # Consultas mÃ©dicas
â”‚   â”‚   â”œâ”€â”€ laboratorio_repository.py            # Laboratorio
â”‚   â”‚   â”œâ”€â”€ producto_repository.py               # Productos + Marcas + Lotes
â”‚   â”‚   â”œâ”€â”€ compra_repository.py                 # Compras + Proveedores
â”‚   â”‚   â”œâ”€â”€ venta_repository.py                  # Ventas + Detalles
â”‚   â”‚   â”œâ”€â”€ gasto_repository.py                  # Gastos + Tipos
â”‚   â”‚   â””â”€â”€ estadistica_repository.py            # Consultas complejas
â”‚   â”‚
â”‚   â””â”€â”€ main.py                                  # Punto de entrada principal
â”‚
â”œâ”€â”€ frontend/                                    # ğŸ¨ Interfaz QML
â”‚   â”œâ”€â”€ qml/
â”‚   â”‚   â”œâ”€â”€ components/                          # Componentes reutilizables
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ SideMenu.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ TableComponent.qml               # Tabla reutilizable
â”‚   â”‚   â”‚   â”œâ”€â”€ FormDialog.qml                   # DiÃ¡logo formulario
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchBar.qml                    # Barra bÃºsqueda
â”‚   â”‚   â”‚   â”œâ”€â”€ PaginationComponent.qml          # PaginaciÃ³n
â”‚   â”‚   â”‚   â””â”€â”€ Notification.qml
â”‚   â”‚   â”œâ”€â”€ views/                               # Vistas principales
â”‚   â”‚   â”‚   â”œâ”€â”€ main.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ login.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ usuario.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ consultas.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ laboratorio.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ farmacia.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ compras.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ ventas.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ trabajadores.qml
â”‚   â”‚   â”‚   â”œâ”€â”€ reportes.qml
â”‚   â”‚   â”‚   â””â”€â”€ configuracion.qml
â”‚   â”‚   â””â”€â”€ main.qml                             # Entrada principal
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ icons/
â”‚       â”œâ”€â”€ fonts/
â”‚       â””â”€â”€ qml.qrc                              # Recursos Qt
â”‚
â”œâ”€â”€ database/                                    # ğŸ“„ Scripts SQL
â”‚   â”œâ”€â”€ clinica_db.sql                           # Tu script actual
â”‚   â”œâ”€â”€ indexes.sql                              # Ãndices optimizaciÃ³n
â”‚   â””â”€â”€ stored_procedures.sql                    # Procedimientos almacenados
â”‚
â”œâ”€â”€ docs/                                        # ğŸ“š DocumentaciÃ³n
â”‚   â”œâ”€â”€ architecture.md                          # DocumentaciÃ³n arquitectura
â”‚   â”œâ”€â”€ database_schema.md                       # Esquema BD
â”‚   â””â”€â”€ models_reference.md                      # Referencia Models
â”‚
â”œâ”€â”€ requirements.txt                             # Dependencias Python
â”œâ”€â”€ run.py                                       # Script ejecuciÃ³n
â””â”€â”€ .env.example                                 # Variables entorno

## CAMBIOS PRINCIPALES VS ARQUITECTURA API

### âŒ ELIMINADO:
- Carpeta `backend/api/` (12 archivos menos)
- Referencias a APIs en documentaciÃ³n

### âœ… MODIFICADO:
- `backend/api/` â†’ `backend/models/` (QObject con Signals/Slots/Properties)
- Servicios son OPCIONALES (pueden usarse desde Models)
- main.py registra Models directamente en QML

### ğŸ“Š CONTEO DE ARCHIVOS:

**CORE (7 archivos):**
- config.py, database_connection.py, exceptions.py, cache_system.py
- base_repository.py, utils.py, __init__.py

**MODELS (13 archivos):**
- 12 models + __init__.py

**REPOSITORIES (12 archivos):**
- 11 repositories + __init__.py

**SERVICES (13 archivos OPCIONALES):**
- 12 services + __init__.py

**FRONTEND QML (20+ archivos):**
- Views + Components + Resources

**TOTAL BACKEND: 32 archivos (vs 45 con APIs) = 28% MENOS**

## FLUJO DE DATOS SIMPLIFICADO:

QML â†’ Model (QObject) â†’ [Service] â†’ Repository â†’ SQL Server
  â†‘         â†“
Properties Signals

## ESTRUCTURA DE CARPETAS PRINCIPALES:

### backend/core/ (FUNDAMENTAL)
Sistema base compartido - configuraciÃ³n, cachÃ©, excepciones

### backend/models/ (PRINCIPAL)
QObject classes con @Slot, @Signal, @Property para conectar con QML

### backend/repositories/ (ACCESO DATOS)  
Clases CRUD con sistema de cachÃ© integrado

### backend/services/ (OPCIONAL)
LÃ³gica de negocio compleja - usar solo si Models se vuelven muy grandes

### frontend/qml/
Interfaz Qt/QML que conecta SOLO con Models

## DescripciÃ³n de la Arquitectura

**Backend**: Arquitectura por capas con patrÃ³n Repository
- **Database**: ConexiÃ³n SQL Server, modelos ORM y repositorios por dominio
- **Services**: LÃ³gica de negocio encapsulada por mÃ³dulos
- **Core**: ConfiguraciÃ³n global y utilidades
- **API**: Interfaz de comunicaciÃ³n con el frontend QML

**Frontend**: Interfaz Qt QML con componentes reutilizables
- **Components**: Elementos UI comunes (Header, SideMenu, Notifications)
- **Views**: Pantallas especÃ­ficas para cada mÃ³dulo clÃ­nico
- **Resources**: Iconos y tipografÃ­as personalizadas

Esta estructura implementa una arquitectura limpia, mantenible y escalable para gestiÃ³n clÃ­nica integral.