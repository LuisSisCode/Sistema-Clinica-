‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                   ARQUITECTURA DEL SISTEMA                                  ‚ïë
‚ïë              Sistema Cl√≠nica Mar√≠a Inmaculada v1.0                         ‚ïë
‚ïë                    Actualizado: Octubre 2025                                ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

================================================================================
                            ESTRUCTURA DEL PROYECTO
================================================================================

Sistema-Clinica-/
‚îÇ
‚îú‚îÄ‚îÄ üìÅ backend/                          # Backend Python
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ core/                         # M√≥dulos centrales
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py                    # Configuraci√≥n del sistema
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database_conexion.py        # Conexi√≥n a SQL Server
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache_system.py             # Sistema de cach√©
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ excepciones.py              # Excepciones personalizadas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base_repository.py          # Repositorio base
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.py                     # Utilidades generales
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db_installer.py             # Instalador de BD
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config_manager.py           # Gestor de configuraci√≥n
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ models/                       # Modelos QObject (Qt)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_model.py                # Autenticaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ usuario_model.py             # Usuarios
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ paciente_model.py            # Pacientes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trabajador_model.py          # Trabajadores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ consulta_model.py            # Consultas m√©dicas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ enfermeria_model.py          # Enfermer√≠a
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ laboratorio_model.py         # Laboratorio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inventario_model.py          # Inventario (FIFO)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ proveedor_model.py           # Proveedores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ compra_model.py              # Compras
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ venta_model.py               # Ventas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gasto_model.py               # Gastos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cierre_caja_model.py         # Cierre de caja
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ingreso_extra_model.py       # Ingresos extras
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reportes_model.py            # Reportes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard_model.py           # Dashboard
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ ConfiguracionModel/       # Configuraci√≥n
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ConfiConsulta_model.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ConfiEnfermeria_model.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ConfiLaboratorio_model.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ConfiServiciosbasicos_model.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ConfiTrabajadores_model.py
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ repositories/                 # Repositorios (Acceso a datos)
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ auth_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ usuario_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ paciente_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ trabajador_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ consulta_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ enfermeria_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ laboratorio_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ producto_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ proveedor_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ compra_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ venta_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ gasto_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ cierre_caja_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ ingreso_extra_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ reportes_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ egreso_repository.py
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ üìÅ ConfiguracionRepositor/   # Configuraci√≥n
‚îÇ           ‚îú‚îÄ‚îÄ __init__.py
‚îÇ           ‚îú‚îÄ‚îÄ ConfiConsulta_repository.py
‚îÇ           ‚îú‚îÄ‚îÄ ConfiEnfermeria_repository.py
‚îÇ           ‚îú‚îÄ‚îÄ ConfiLaboratorio_repository.py
‚îÇ           ‚îú‚îÄ‚îÄ ConfiServiciosbasicos_repository.py
‚îÇ           ‚îî‚îÄ‚îÄ ConfiTrabajadores_repository.py
‚îÇ
‚îú‚îÄ‚îÄ üìÅ database_scripts/                 # ‚úÖ Scripts SQL
‚îÇ   ‚îú‚îÄ‚îÄ 01_schema.sql                    # Estructura de BD
‚îÇ   ‚îî‚îÄ‚îÄ 02_datos_iniciales.sql          # ‚úÖ NUEVO - Datos iniciales
‚îÇ
‚îú‚îÄ‚îÄ üìÅ Resources/                        # Recursos
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ iconos/                       # Iconos del sistema
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logo_CMI.svg
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logo_CMI.ico
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [otros iconos...]
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ fonts/                        # Fuentes (opcional)
‚îÇ
‚îú‚îÄ‚îÄ üìÅ assets/                           # Assets adicionales
‚îÇ   ‚îî‚îÄ‚îÄ [recursos adicionales]
‚îÇ
‚îú‚îÄ‚îÄ üìÅ reportes/                         # ‚úÖ Reportes generados
‚îÇ   ‚îî‚îÄ‚îÄ [PDFs generados autom√°ticamente]
‚îÇ
‚îú‚îÄ‚îÄ üìÅ logs/                             # ‚úÖ Logs del sistema
‚îÇ   ‚îî‚îÄ‚îÄ [archivos .log]
‚îÇ
‚îú‚îÄ‚îÄ üìÅ temp/                             # ‚úÖ Archivos temporales
‚îÇ   ‚îî‚îÄ‚îÄ [archivos temporales]
‚îÇ
‚îú‚îÄ‚îÄ üìÑ main.py                           # ‚úÖ MODIFICADO - Punto de entrada
‚îú‚îÄ‚îÄ üìÑ setup_handler.py                  # ‚úÖ NUEVO - Handler del wizard
‚îú‚îÄ‚îÄ üìÑ generar_pdf.py                    # Generador de PDFs
‚îÇ
‚îú‚îÄ‚îÄ üìÑ main.qml                          # Ventana principal
‚îú‚îÄ‚îÄ üìÑ login.qml                         # Pantalla de login
‚îú‚îÄ‚îÄ üìÑ setup_wizard.qml                  # ‚úÖ NUEVO - Wizard de configuraci√≥n
‚îú‚îÄ‚îÄ üìÑ Dashboard.qml                     # Dashboard principal
‚îÇ
‚îú‚îÄ‚îÄ üìÑ Farmacia.qml                      # M√≥dulo Farmacia
‚îú‚îÄ‚îÄ üìÑ Productos.qml                     # Gesti√≥n de productos
‚îú‚îÄ‚îÄ üìÑ CrearProducto.qml                 # Crear producto
‚îú‚îÄ‚îÄ üìÑ DetalleProducto.qml               # Detalle de producto
‚îÇ
‚îú‚îÄ‚îÄ üìÑ Ventas.qml                        # M√≥dulo Ventas
‚îú‚îÄ‚îÄ üìÑ VentasMain.qml                    # Main de ventas
‚îú‚îÄ‚îÄ üìÑ CrearVenta.qml                    # Crear venta
‚îÇ
‚îú‚îÄ‚îÄ üìÑ Compras.qml                       # M√≥dulo Compras
‚îú‚îÄ‚îÄ üìÑ ComprasMain.qml                   # Main de compras
‚îú‚îÄ‚îÄ üìÑ CrearCompra.qml                   # Crear compra
‚îÇ
‚îú‚îÄ‚îÄ üìÑ Proveedores.qml                   # Gesti√≥n de proveedores
‚îú‚îÄ‚îÄ üìÑ CrearProveedor.qml                # Crear proveedor
‚îÇ
‚îú‚îÄ‚îÄ üìÑ Consultas.qml                     # M√≥dulo Consultas
‚îú‚îÄ‚îÄ üìÑ Laboratorio.qml                   # M√≥dulo Laboratorio
‚îú‚îÄ‚îÄ üìÑ Enfermeria.qml                    # M√≥dulo Enfermer√≠a
‚îÇ
‚îú‚îÄ‚îÄ üìÑ ServiciosBasicos.qml              # M√≥dulo Gastos
‚îú‚îÄ‚îÄ üìÑ Trabajadores.qml                  # Gesti√≥n de trabajadores
‚îú‚îÄ‚îÄ üìÑ Usuario.qml                       # Gesti√≥n de usuarios
‚îÇ
‚îú‚îÄ‚îÄ üìÑ Configuracion.qml                 # Configuraci√≥n general
‚îú‚îÄ‚îÄ üìÑ ConfiConsultas.qml                # Config. Consultas
‚îú‚îÄ‚îÄ üìÑ ConfiEnfermeria.qml               # Config. Enfermer√≠a
‚îú‚îÄ‚îÄ üìÑ ConfiLaboratorio.qml              # Config. Laboratorio
‚îú‚îÄ‚îÄ üìÑ ConfiServiciosBasicos.qml         # Config. Gastos
‚îú‚îÄ‚îÄ üìÑ ConfiTrabajadores.qml             # Config. Trabajadores
‚îú‚îÄ‚îÄ üìÑ ConfiUsuarios.qml                 # Config. Usuarios
‚îÇ
‚îú‚îÄ‚îÄ üìÑ Reportes.qml                      # M√≥dulo Reportes
‚îú‚îÄ‚îÄ üìÑ CierreCaja.qml                    # Cierre de caja
‚îú‚îÄ‚îÄ üìÑ IngresosExtras.qml                # Ingresos extras
‚îÇ
‚îú‚îÄ‚îÄ üìÑ MarcaComboBox.qml                 # Componente ComboBox
‚îú‚îÄ‚îÄ üìÑ ProveedorComboBox.qml             # Componente ComboBox
‚îú‚îÄ‚îÄ üìÑ GlobalDataCenter.qml              # Centro de datos global
‚îÇ
‚îú‚îÄ‚îÄ üìÑ .env                              # ‚úÖ Configuraci√≥n local (NO subir a Git)
‚îú‚îÄ‚îÄ üìÑ .gitignore                        # ‚úÖ Archivos ignorados por Git
‚îú‚îÄ‚îÄ üìÑ requirements.txt                  # Dependencias Python
‚îú‚îÄ‚îÄ üìÑ clinica.spec                      # ‚úÖ ACTUALIZADO - Config PyInstaller
‚îú‚îÄ‚îÄ üìÑ dependencias_actuales.txt         # Documentaci√≥n de dependencias
‚îú‚îÄ‚îÄ üìÑ README.md                         # ‚úÖ Documentaci√≥n principal
‚îî‚îÄ‚îÄ üìÑ LEEME.txt                         # ‚úÖ Instrucciones para usuarios

================================================================================
                            M√ìDULOS PRINCIPALES
================================================================================

1. üîê AUTENTICACI√ìN Y USUARIOS
   ‚îú‚îÄ‚îÄ Login con validaci√≥n
   ‚îú‚îÄ‚îÄ Gesti√≥n de usuarios
   ‚îú‚îÄ‚îÄ Roles y permisos (Administrador, M√©dico)
   ‚îî‚îÄ‚îÄ ‚úÖ Setup Wizard para primera configuraci√≥n

2. üíä FARMACIA
   ‚îú‚îÄ‚îÄ Inventario con sistema FIFO
   ‚îú‚îÄ‚îÄ Gesti√≥n de productos
   ‚îú‚îÄ‚îÄ Gesti√≥n de marcas
   ‚îú‚îÄ‚îÄ Control de lotes con fechas de vencimiento
   ‚îú‚îÄ‚îÄ Alertas de productos pr√≥ximos a vencer
   ‚îî‚îÄ‚îÄ Alertas de stock bajo

3. üè™ VENTAS Y COMPRAS
   ‚îú‚îÄ‚îÄ Registro de ventas (FIFO autom√°tico)
   ‚îú‚îÄ‚îÄ Registro de compras por lote
   ‚îú‚îÄ‚îÄ Gesti√≥n de proveedores
   ‚îú‚îÄ‚îÄ Historial de transacciones
   ‚îî‚îÄ‚îÄ Control de stock automatizado

4. ü©∫ CONSULTAS M√âDICAS
   ‚îú‚îÄ‚îÄ Registro de pacientes (con/sin c√©dula)
   ‚îú‚îÄ‚îÄ Gesti√≥n de consultas
   ‚îú‚îÄ‚îÄ Especialidades m√©dicas
   ‚îú‚îÄ‚îÄ Precios normal/emergencia
   ‚îî‚îÄ‚îÄ Historial cl√≠nico

5. üî¨ LABORATORIO
   ‚îú‚îÄ‚îÄ Tipos de an√°lisis cl√≠nicos
   ‚îú‚îÄ‚îÄ Registro de ex√°menes
   ‚îú‚îÄ‚îÄ Asignaci√≥n de trabajadores
   ‚îú‚îÄ‚îÄ Precios normal/emergencia
   ‚îî‚îÄ‚îÄ Historial de an√°lisis

6. üíâ ENFERMER√çA
   ‚îú‚îÄ‚îÄ Tipos de procedimientos
   ‚îú‚îÄ‚îÄ Registro de procedimientos
   ‚îú‚îÄ‚îÄ Asignaci√≥n de personal
   ‚îú‚îÄ‚îÄ Precios normal/emergencia
   ‚îî‚îÄ‚îÄ Historial de procedimientos

7. üí∞ GESTI√ìN FINANCIERA
   ‚îú‚îÄ‚îÄ Registro de gastos
   ‚îú‚îÄ‚îÄ Tipos de gastos
   ‚îú‚îÄ‚îÄ Proveedores de gastos
   ‚îú‚îÄ‚îÄ Ingresos extras
   ‚îú‚îÄ‚îÄ Cierre de caja diario
   ‚îî‚îÄ‚îÄ Control de efectivo

8. üìä DASHBOARD Y REPORTES
   ‚îú‚îÄ‚îÄ Dashboard con estad√≠sticas en tiempo real
   ‚îú‚îÄ‚îÄ Ingresos por m√≥dulo (Farmacia, Consultas, Lab, Enfermer√≠a)
   ‚îú‚îÄ‚îÄ Egresos (Servicios b√°sicos)
   ‚îú‚îÄ‚îÄ Alertas de inventario
   ‚îú‚îÄ‚îÄ Generaci√≥n de reportes PDF
   ‚îÇ   ‚îú‚îÄ‚îÄ Reporte de ventas
   ‚îÇ   ‚îú‚îÄ‚îÄ Reporte de compras
   ‚îÇ   ‚îú‚îÄ‚îÄ Reporte de consultas
   ‚îÇ   ‚îú‚îÄ‚îÄ Reporte de laboratorio
   ‚îÇ   ‚îú‚îÄ‚îÄ Reporte de enfermer√≠a
   ‚îÇ   ‚îú‚îÄ‚îÄ Reporte de gastos
   ‚îÇ   ‚îú‚îÄ‚îÄ Reporte de ingresos/egresos
   ‚îÇ   ‚îî‚îÄ‚îÄ Arqueo de caja
   ‚îî‚îÄ‚îÄ Filtros por fecha y tipo

9. ‚öôÔ∏è CONFIGURACI√ìN
   ‚îú‚îÄ‚îÄ Configuraci√≥n de consultas
   ‚îú‚îÄ‚îÄ Configuraci√≥n de enfermer√≠a
   ‚îú‚îÄ‚îÄ Configuraci√≥n de laboratorio
   ‚îú‚îÄ‚îÄ Configuraci√≥n de gastos
   ‚îú‚îÄ‚îÄ Configuraci√≥n de trabajadores
   ‚îî‚îÄ‚îÄ Gesti√≥n de usuarios

================================================================================
                         TECNOLOG√çAS UTILIZADAS
================================================================================

Frontend:
  ‚Ä¢ PySide6 (Qt for Python) 6.9.1
  ‚Ä¢ QML (Qt Quick)
  ‚Ä¢ Qt Quick Controls 2

Backend:
  ‚Ä¢ Python 3.11+
  ‚Ä¢ Arquitectura MVC (Model-View-Controller)
  ‚Ä¢ Patr√≥n Repository para acceso a datos
  ‚Ä¢ Sistema de cach√© para optimizaci√≥n

Base de Datos:
  ‚Ä¢ SQL Server Express
  ‚Ä¢ pyodbc 5.2.0
  ‚Ä¢ ‚úÖ Scripts SQL automatizados
  ‚Ä¢ ‚úÖ Instalador autom√°tico de BD

Reportes:
  ‚Ä¢ ReportLab 4.4.3
  ‚Ä¢ Pillow 11.3.0 (procesamiento de im√°genes)

Gesti√≥n de Configuraci√≥n:
  ‚Ä¢ python-dotenv 1.1.1
  ‚Ä¢ ‚úÖ ConfigManager para gesti√≥n de .env

Empaquetado:
  ‚Ä¢ PyInstaller 6.16.0
  ‚Ä¢ ‚úÖ clinica.spec optimizado

Otras Dependencias:
  ‚Ä¢ Flask 3.1.1 (opcional, para futuras APIs)
  ‚Ä¢ flask-cors 6.0.1

================================================================================
                         FLUJO DE TRABAJO
================================================================================

üìå PRIMERA EJECUCI√ìN (Setup Autom√°tico):
   1. Usuario ejecuta ClinicaApp.exe
   2. Sistema detecta que no existe .env
   3. Muestra Setup Wizard autom√°ticamente
   4. Usuario hace click en "Setup Autom√°tico"
   5. Sistema:
      ‚îú‚îÄ‚îÄ Verifica SQL Server instalado
      ‚îú‚îÄ‚îÄ Crea base de datos ClinicaMariaInmaculada
      ‚îú‚îÄ‚îÄ Ejecuta 01_schema.sql (estructura)
      ‚îú‚îÄ‚îÄ Ejecuta 02_datos_iniciales.sql (datos base)
      ‚îú‚îÄ‚îÄ Crea usuario admin (admin/admin123)
      ‚îú‚îÄ‚îÄ Genera archivo .env con configuraci√≥n
      ‚îî‚îÄ‚îÄ Muestra credenciales al usuario
   6. Usuario hace click en "IR AL LOGIN"
   7. Sistema muestra pantalla de login
   8. Usuario inicia sesi√≥n con admin/admin123

üìå EJECUCIONES POSTERIORES (Login Normal):
   1. Usuario ejecuta ClinicaApp.exe
   2. Sistema detecta que existe .env
   3. Muestra pantalla de login directamente
   4. Usuario inicia sesi√≥n
   5. Sistema carga dashboard y m√≥dulos

üìå FLUJO DE VENTA:
   1. Usuario selecciona productos
   2. Sistema aplica FIFO autom√°ticamente
   3. Descuenta del lote m√°s antiguo primero
   4. Actualiza stock en tiempo real
   5. Genera reporte PDF (opcional)

üìå FLUJO DE COMPRA:
   1. Usuario crea nuevo lote
   2. Ingresa datos (producto, cantidad, vencimiento)
   3. Sistema registra compra
   4. Actualiza inventario
   5. Stock disponible = suma de lotes

üìå FLUJO DE CONSULTA:
   1. Buscar/crear paciente (por c√©dula o nombre)
   2. Seleccionar especialidad
   3. Registrar consulta
   4. Sistema calcula precio (normal/emergencia)
   5. Genera registro en BD

üìå CIERRE DE CAJA:
   1. Usuario ingresa rango horario
   2. Sistema calcula autom√°ticamente:
      ‚îú‚îÄ‚îÄ Ingresos (Farmacia + Consultas + Lab + Enfermer√≠a + Extras)
      ‚îú‚îÄ‚îÄ Egresos (Gastos)
      ‚îî‚îÄ‚îÄ Saldo te√≥rico
   3. Usuario ingresa efectivo real
   4. Sistema calcula diferencia
   5. Genera PDF de arqueo

================================================================================
                       BASE DE DATOS (SQL SERVER)
================================================================================

üìä TABLAS PRINCIPALES:

Sistema:
  ‚Ä¢ Roles (Administrador, M√©dico)
  ‚Ä¢ Usuario (Credenciales y permisos)

Cl√≠nica:
  ‚Ä¢ Pacientes (Con/sin c√©dula)
  ‚Ä¢ Doctores
  ‚Ä¢ Especialidad
  ‚Ä¢ Consultas

Farmacia:
  ‚Ä¢ Productos (C√≥digo √∫nico)
  ‚Ä¢ Marca
  ‚Ä¢ Lote (Control FIFO)
  ‚Ä¢ Proveedor

Transacciones:
  ‚Ä¢ Ventas
  ‚Ä¢ DetallesVentas (FIFO)
  ‚Ä¢ Compra
  ‚Ä¢ DetalleCompra

Laboratorio:
  ‚Ä¢ Tipos_Analisis
  ‚Ä¢ Laboratorio (Registros)

Enfermer√≠a:
  ‚Ä¢ Tipos_Procedimientos
  ‚Ä¢ Enfermeria (Registros)

Recursos Humanos:
  ‚Ä¢ Trabajadores
  ‚Ä¢ Tipo_Trabajadores

Finanzas:
  ‚Ä¢ Gastos
  ‚Ä¢ Tipo_Gastos
  ‚Ä¢ Proveedor_Gastos
  ‚Ä¢ IngresosExtras
  ‚Ä¢ CierreCaja

‚úÖ DATOS INICIALES PRECARGADOS:
  ‚Ä¢ 2 Roles (Administrador, M√©dico)
  ‚Ä¢ 6 Tipos de Trabajadores
  ‚Ä¢ 6 Tipos de Gastos
  ‚Ä¢ 5 Especialidades m√©dicas
  ‚Ä¢ 10 Tipos de an√°lisis de laboratorio
  ‚Ä¢ 10 Tipos de procedimientos de enfermer√≠a
  ‚Ä¢ 8 Marcas de productos
  ‚Ä¢ 1 Doctor del sistema
  ‚Ä¢ 1 Proveedor de gastos base

================================================================================
                       CARACTER√çSTICAS T√âCNICAS
================================================================================

‚úÖ Sistema FIFO Completo:
   ‚Ä¢ Control de lotes con fechas
   ‚Ä¢ Venta autom√°tica del lote m√°s antiguo
   ‚Ä¢ Alertas de vencimiento (60 d√≠as)
   ‚Ä¢ Trazabilidad completa

‚úÖ Sistema de Cach√©:
   ‚Ä¢ Cach√© por tipo (consultas, laboratorio, etc.)
   ‚Ä¢ Invalidaci√≥n autom√°tica
   ‚Ä¢ Reducci√≥n de consultas a BD
   ‚Ä¢ Mejor rendimiento

‚úÖ Sistema de Permisos:
   ‚Ä¢ Rol Administrador: Acceso total
   ‚Ä¢ Rol M√©dico: Acceso a m√≥dulos cl√≠nicos
   ‚Ä¢ Validaci√≥n en backend y frontend
   ‚Ä¢ Seguridad por capas

‚úÖ Generaci√≥n de Reportes PDF:
   ‚Ä¢ Encabezado con logo y datos
   ‚Ä¢ Tablas formateadas
   ‚Ä¢ Res√∫menes autom√°ticos
   ‚Ä¢ Filtros por fecha
   ‚Ä¢ Guardado autom√°tico en carpeta reportes/

‚úÖ Setup Wizard (Primera Vez):
   ‚Ä¢ Detecci√≥n autom√°tica de primera ejecuci√≥n
   ‚Ä¢ Instalaci√≥n autom√°tica de base de datos
   ‚Ä¢ Creaci√≥n de usuario admin
   ‚Ä¢ Configuraci√≥n sin intervenci√≥n manual
   ‚Ä¢ Validaci√≥n de SQL Server

‚úÖ Interfaz Responsive:
   ‚Ä¢ Dise√±o adaptable
   ‚Ä¢ Componentes reutilizables
   ‚Ä¢ Navegaci√≥n fluida
   ‚Ä¢ Feedback visual

================================================================================
                       COMPILACI√ìN Y DISTRIBUCI√ìN
================================================================================

üì¶ COMPILAR EJECUTABLE:
   
   1. Activar entorno virtual:
      .\venv\Scripts\Activate.ps1

   2. Limpiar compilaciones previas:
      Remove-Item -Recurse -Force build, dist

   3. Compilar con PyInstaller:
      pyinstaller clinica.spec --clean

   4. Ejecutable generado en:
      dist\ClinicaApp\ClinicaApp.exe

üì¶ CREAR ZIP PORTABLE:
   
   1. Verificar que NO exista .env en dist\ClinicaApp\
   2. Eliminar archivos temporales (*.log, *.tmp)
   3. Copiar LEEME.txt a dist\ClinicaApp\
   4. Comprimir:
      Compress-Archive -Path "dist\ClinicaApp" -DestinationPath "ClinicaApp_v1.0.zip"

üì¶ ESTRUCTURA DEL EJECUTABLE:

   ClinicaApp/
   ‚îú‚îÄ‚îÄ ClinicaApp.exe              (Ejecutable principal)
   ‚îú‚îÄ‚îÄ database_scripts/           (Scripts SQL - CR√çTICO)
   ‚îÇ   ‚îú‚îÄ‚îÄ 01_schema.sql
   ‚îÇ   ‚îî‚îÄ‚îÄ 02_datos_iniciales.sql
   ‚îú‚îÄ‚îÄ Resources/                  (Recursos)
   ‚îú‚îÄ‚îÄ _internal/                  (Librer√≠as internas)
   ‚îú‚îÄ‚îÄ *.qml                       (Archivos de interfaz)
   ‚îú‚îÄ‚îÄ setup_wizard.qml            ‚úÖ NUEVO
   ‚îú‚îÄ‚îÄ LEEME.txt                   (Instrucciones)
   ‚îú‚îÄ‚îÄ reportes/                   (Se crea autom√°ticamente)
   ‚îú‚îÄ‚îÄ logs/                       (Se crea autom√°ticamente)
   ‚îî‚îÄ‚îÄ temp/                       (Se crea autom√°ticamente)

================================================================================
                       CREDENCIALES POR DEFECTO
================================================================================

üîë Usuario Administrador:
   Usuario: admin
   Contrase√±a: admin123

‚ö†Ô∏è IMPORTANTE: 
   - Cambiar contrase√±a despu√©s del primer inicio
   - Acceso desde: Configuraci√≥n > Usuarios > Cambiar Contrase√±a

================================================================================
                       ARCHIVOS DE CONFIGURACI√ìN
================================================================================

üìÑ .env (Generado autom√°ticamente por Setup Wizard):
   DB_SERVER=localhost\SQLEXPRESS
   DB_DATABASE=ClinicaMariaInmaculada
   DB_TRUSTED_CONNECTION=yes
   DB_TIMEOUT=30
   FIRST_TIME_SETUP=False
   
   ‚ö†Ô∏è Este archivo NO debe incluirse en Git
   ‚ö†Ô∏è NO debe incluirse en el ZIP de distribuci√≥n

üìÑ .gitignore (Control de versiones):
   ‚Ä¢ Excluye venv/, dist/, build/
   ‚Ä¢ Excluye .env y archivos de configuraci√≥n local
   ‚Ä¢ Excluye reportes generados
   ‚Ä¢ Excluye logs y temporales

üìÑ requirements.txt (Dependencias):
   PySide6==6.9.1
   pyodbc==5.2.0
   reportlab==4.4.3
   python-dotenv==1.1.1
   pillow==11.3.0
   pyinstaller==6.16.0
   flask==3.1.1
   flask-cors==6.0.1

================================================================================
                       NOTAS DE VERSI√ìN
================================================================================

v1.0 (Octubre 2025):
  ‚úÖ Sistema completo de gesti√≥n cl√≠nica
  ‚úÖ Setup Wizard autom√°tico (primera ejecuci√≥n)
  ‚úÖ Instalador de base de datos automatizado
  ‚úÖ M√≥dulos: Farmacia, Consultas, Laboratorio, Enfermer√≠a
  ‚úÖ Sistema FIFO completo
  ‚úÖ Reportes PDF personalizados
  ‚úÖ Dashboard con estad√≠sticas en tiempo real
  ‚úÖ Cierre de caja con arqueo autom√°tico
  ‚úÖ Gesti√≥n de usuarios y permisos
  ‚úÖ Compilaci√≥n a ejecutable standalone
  ‚úÖ Sistema portable (ZIP)
